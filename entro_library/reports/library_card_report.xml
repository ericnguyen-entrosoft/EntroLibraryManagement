<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Custom Paper Format for Library Card -->
    <record id="paperformat_library_card" model="report.paperformat">
        <field name="name">Library Card Format</field>
        <field name="default" eval="False"/>
        <field name="format">custom</field>
        <field name="page_height">108</field>
        <field name="page_width">75</field>
        <field name="orientation">Landscape</field>
        <field name="margin_top">3</field>
        <field name="margin_bottom">0</field>
        <field name="margin_left">0</field>
        <field name="margin_right">0</field>
        <field name="header_line" eval="False"/>
        <field name="header_spacing">0</field>
        <field name="dpi">96</field>
    </record>

    <!-- Report Action -->
    <record id="action_report_library_card" model="ir.actions.report">
        <field name="name">Th·∫ª th∆∞ vi·ªán</field>
        <field name="model">res.partner</field>
        <field name="report_type">qweb-pdf</field>
        <field name="report_name">entro_library.report_library_card_document</field>
        <field name="report_file">entro_library.report_library_card_document</field>
        <field name="binding_model_id" ref="base.model_res_partner"/>
        <field name="binding_type">report</field>
        <field name="paperformat_id" ref="paperformat_library_card"/>
    </record>

    <!-- Report Template -->
    <template id="report_library_card_document">
        <t t-call="web.basic_layout">
            <div class="page">
                <t t-foreach="docs" t-as="partner">
                    <div style="font-family: Arial, sans-serif; page-break-after: always; width: 100%; box-sizing: border-box;border: 1px solid #f1ebe1;border-radius:5px">

                        <!-- Header with Company Logo -->
                        <div style="display: table; width: 100%; margin-bottom: 10px;background-color:#f2e5d5;height:55px;position:relative;padding-left:5px">
                            <div style="display: table-cell; vertical-align: middle; width: 65px;">
                                <t t-if="partner.company_id.logo">
                                    <img t-att-src="image_data_uri(partner.company_id.logo)"
                                         alt="Logo"
                                         style="max-width: 60px; max-height: 40px;"/>
                                </t>
                            </div>
                            <div style="display: table-cell; vertical-align: middle; padding-left: 10px;">
                                <div style="color: #8c675a; font-size: 14px; font-weight: bold; letter-spacing: 0.5px; font-family: Arial, sans-serif; line-height: 1.3;">
                                    THI·ªÄN VI·ªÜN PH√ÅP S∆†N - TH∆Ø VI·ªÜN PH√ÅP ƒêƒÇNG
                                </div>
                            </div>
                        </div>

                        <!-- Content -->
                        <div style="display: table; width: 100%;padding-left:5px;padding-right:5px">
                            <!-- Photo Section -->
                            <div style="display: table-cell; vertical-align: middle; width: 120px; padding-right: 10px">
                                <div style="width: 120px; height: 150px; background: white; border: 2px solid #666; border-radius: 5px; overflow: hidden;">
                                    <t t-if="partner.image_1920">
                                        <img t-att-src="image_data_uri(partner.image_1920)"
                                             alt="Photo"
                                             style="width: 100%; height: 100%; object-fit: cover;"/>
                                    </t>
                                    <t t-else="">
                                        <div style="width: 100%; height: 100%; display: table;">
                                            <div style="display: table-cell; vertical-align: middle; text-align: center; color: #ccc; font-size: 40px;">
                                                üë§
                                            </div>
                                        </div>
                                    </t>
                                </div>
                            </div>

                            <!-- Info Section -->
                            <div style="display: table-cell; vertical-align: top;">
                                <!-- Title -->
                                <div style="text-align:center; color: #8c675a; font-size: 20px; font-weight: bold; margin-bottom: 12px; letter-spacing: 1.2px; font-family: Arial, sans-serif;">
                                    TH·∫∫ TH∆Ø VI·ªÜN
                                </div>

                                <!-- H·ªç v√† t√™n -->
                                <div style="margin-bottom: 10px;">
                                    <div style="color: #8c675a; font-size: 11px; font-weight: bold; margin-bottom: 4px; font-family: Arial, sans-serif;">
                                        H·ªç v√† t√™n:
                                    </div>
                                    <div style="border-bottom: 2px solid #999; padding-bottom: 3px; min-height: 18px; font-size: 11px; font-family: Arial, sans-serif;">
                                        <t t-esc="partner.name"/>
                                    </div>
                                </div>

                                <!-- Ph√°p danh -->
                                <div style="margin-bottom: 10px;">
                                    <div style="color: #8c675a; font-size: 11px; font-weight: bold; margin-bottom: 4px; font-family: Arial, sans-serif;">
                                        Ph√°p danh:
                                    </div>
                                    <div style="border-bottom: 2px solid #999; padding-bottom: 3px; min-height: 18px; font-size: 11px; font-family: Arial, sans-serif;">
                                        <t t-esc="partner.dharma_name or ''"/>
                                    </div>
                                </div>

                                <!-- T√†i kho·∫£n TV -->
                                <div style="margin-bottom: 10px;">
                                    <div style="color: #8c675a; font-size: 11px; font-weight: bold; margin-bottom: 4px; font-family: Arial, sans-serif;">
                                        T√†i kho·∫£n TV:
                                    </div>
                                    <div style="border-bottom: 2px solid #999; padding-bottom: 3px; min-height: 18px; font-size: 11px; font-family: Arial, sans-serif;">
                                        <t t-esc="partner.borrower_code or ''"/>
                                    </div>
                                </div>

                                <!-- Barcode -->
                                <div style="color: white; text-align: center; padding-top: 20px;width:100%;margin-bottom:5px">
                                    <t t-if="partner.borrower_code">
                                        <div t-out="partner.borrower_code" t-options="{'widget': 'barcode', 'symbology': 'auto', 'img_style': 'height: 40px; width: 100%;'}"/>
                                    </t>
                                    <t t-else="">
                                        <div style="font-size: 12px; font-weight: bold; letter-spacing: 2px; font-family: Arial, sans-serif;">*M√É V·∫†CH</div>
                                    </t>
                                </div>
                            </div>
                        </div>
                    </div>
                </t>
            </div>
        </t>
    </template>
</odoo>
