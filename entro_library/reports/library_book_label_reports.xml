<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Custom Label Template - 280px x 145px -->
    <template id="report_book_label_content_custom">
        <div class="book-label" style="width: 280px; height: 145px; border: 3px solid #000; border-radius: 12px; display: inline-table; margin: 2px; page-break-inside: avoid; font-family: Arial, sans-serif; margin-right:10px">
            <!-- Left side - 55px width with vertical text -->
            <div style="width: 55px; height: 145px; border-right: 3px solid #000; display: table-cell; vertical-align: middle; text-align: center; position: relative;">
                <div style="position: absolute; left: 50%; top: 50%; width: 145px; height: 55px; margin-left: -72.5px; margin-top: -27.5px; -webkit-transform: rotate(-90deg); -moz-transform: rotate(-90deg); -ms-transform: rotate(-90deg); -o-transform: rotate(-90deg); transform: rotate(-90deg); line-height: 55px; font-size: 18px; font-family: Arial, sans-serif; font-weight: bold;">
                    <t t-esc="quant.registration_number"/>
                </div>
            </div>

            <!-- Right side - remaining width -->
            <div style="display: table-cell; vertical-align: middle; padding: 8px;">
                <div style="display: table; width: 100%; height: 125px;">
                    <!-- Top - Library name -->
                    <div style="display: table-row; height: 25px;">
                        <div style="display: table-cell; vertical-align: middle; text-align: center; font-size: 16px; font-weight: bold; font-family: Arial, sans-serif;">
                            THƯ VIỆN PHÁP ĐĂNG
                        </div>
                    </div>

                    <!-- Middle - Barcode -->
                    <div style="display: table-row; height: 65px;">
                        <div style="display: table-cell; vertical-align: middle; text-align: center;">
                            <div t-out="quant.registration_number" t-options="{'widget': 'barcode', 'symbology': 'auto', 'img_style': 'height: 60px; max-width: 100%;'}"/>
                        </div>
                    </div>

                    <!-- Bottom - Registration number -->
                    <div style="display: table-row; height: 35px;">
                        <div style="display: table-cell; vertical-align: middle; text-align: center; font-size: 22px; font-weight: bold; font-family: Arial, sans-serif;">
                            <t t-esc="quant.registration_number"/>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </template>

    <!-- Custom Label Report Action -->
    <record id="action_report_book_label_custom" model="ir.actions.report">
        <field name="name">Nhãn ĐKCB</field>
        <field name="model">library.book.label.wizard</field>
        <field name="report_type">qweb-pdf</field>
        <field name="report_name">entro_library.report_book_label_custom</field>
        <field name="report_file">entro_library.report_book_label_custom</field>
        <field name="print_report_name">'Nhãn ĐKCB'</field>
        <field name="binding_model_id" ref="model_library_book_label_wizard"/>
        <field name="binding_type">report</field>
    </record>

    <template id="report_book_label_custom">
        <t t-call="web.basic_layout">
            <t t-set="quant_quantities" t-value="data.get('quant_quantities', {})"/>
            <div class="page">
                <t t-foreach="quant_quantities.items()" t-as="item">
                    <t t-set="quant_id" t-value="int(item[0])"/>
                    <t t-set="quantity" t-value="item[1]"/>
                    <t t-set="quant" t-value="env['library.book.quant'].browse(int(quant_id))"/>
                    <t t-foreach="range(int(quantity))" t-as="i">
                        <t t-call="entro_library.report_book_label_content_custom"/>
                    </t>
                </t>
            </div>
        </t>
    </template>

    <!-- DDC Label Template - 188px x 113px -->
    <template id="report_book_label_content_ddc">
        <div class="book-label" style="width: 188px; height: 113px; border: 2px solid #000; border-radius: 8px; display: inline-table; margin: 2px; page-break-inside: avoid; font-family: Arial, sans-serif; margin-right:10px; position: relative; overflow: hidden;">
            <!-- Background Logo with Opacity -->
            <div style="position: absolute; top: 10px; left: 0; width: 100%; height: 100%; background-image: url('/entro_library/static/src/image/logo.png'); background-size: contain; background-position: center; background-repeat: no-repeat; opacity: 0.1; z-index: 0;"></div>

            <div style="display: table-cell; vertical-align: middle; text-align: center; padding: 6px; position: relative; z-index: 1;">
                <div style="display: table; width: 100%; height: 100px;">
                    <!-- Top - Library name -->
                    <div style="display: table-row; height: 12px;">
                        <div style="display: table-cell; vertical-align: middle; text-align: center; font-size: 11px; font-weight: bold; font-family: Arial, sans-serif;">
                            THIỀN VIỆN PHÁP SƠN
                        </div>
                    </div>
                    <div style="display: table-row; height: 10px;">
                        <div style="display: table-cell; vertical-align: middle; text-align: center; font-size: 10px; font-family: Arial, sans-serif;">
                            THƯ VIỆN PHÁP ĐĂNG
                        </div>
                    </div>

                    <!-- Middle - DDC and Cutter -->
                    <div style="display: table-row; height: 65px">
                        <div style="display: table-cell; vertical-align: middle; text-align: center;">
                            <!-- DDC Number -->
                            <div style="font-size: 24px; font-weight: bold; font-family: Arial, sans-serif; margin-bottom: 3px;margin-top:10px">
                                <t t-esc="quant.book_id.ddc_number or ''"/>
                            </div>
                            <!-- Cutter Number -->
                            <div style="font-size: 16px; font-weight: bold; font-family: Arial, sans-serif;">
                                <t t-esc="quant.book_id.cutter_number or ''"/>
                            </div>
                        </div>
                    </div>

                    <!-- Bottom - Registration number -->
                    <div style="display: table-row; height: 23px;">
                        <div style="display: table-cell; vertical-align: middle; text-align: center; font-size: 14px; font-weight: bold; font-family: Arial, sans-serif;">
                            <t t-esc="quant.code_registration_number"/>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </template>

    <!-- DDC Label Report Action -->
    <record id="action_report_book_label_ddc" model="ir.actions.report">
        <field name="name">Nhãn DDC</field>
        <field name="model">library.book.label.wizard</field>
        <field name="report_type">qweb-pdf</field>
        <field name="report_name">entro_library.report_book_label_ddc</field>
        <field name="report_file">entro_library.report_book_label_ddc</field>
        <field name="print_report_name">'Nhãn DDC'</field>
        <field name="binding_model_id" ref="model_library_book_label_wizard"/>
        <field name="binding_type">report</field>
    </record>

    <template id="report_book_label_ddc">
        <t t-call="web.basic_layout">
            <t t-set="quant_quantities" t-value="data.get('quant_quantities', {})"/>
            <div class="page">
                <t t-foreach="quant_quantities.items()" t-as="item">
                    <t t-set="quant_id" t-value="int(item[0])"/>
                    <t t-set="quantity" t-value="item[1]"/>
                    <t t-set="quant" t-value="env['library.book.quant'].browse(int(quant_id))"/>
                    <t t-foreach="range(int(quantity))" t-as="i">
                        <t t-call="entro_library.report_book_label_content_ddc"/>
                    </t>
                </t>
            </div>
        </t>
    </template>
</odoo>
