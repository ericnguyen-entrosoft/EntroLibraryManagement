<?xml version="1.0" encoding="utf-8" ?>
<odoo noupdate="1">
    <record model="ir.module.category" id="module_category_school">
        <field name="name">Library Management</field>
        <field name="sequence">29</field>
    </record>

    <record id="group_librarian" model="res.groups">
        <field name="name">Library Management</field>
        <field name="category_id" ref="module_category_school" />
        <field name="comment">Full access to create/edit books and manage all transfers, borrowing, and inventory operations</field>
        <field
            name="users"
            eval="[(4, ref('base.user_root')), (4, ref('base.user_admin'))]"
        />
    </record>

    <record id="group_userian" model="res.groups">
        <field name="name">Library User</field>
        <field name="category_id" ref="module_category_school" />
        <field name="comment">Read-only access to books with ability to borrow books only</field>
    </record>


    <!-- Record Rule For Library Users - Personal Library Cards -->
    <record id="library_user_card_record" model="ir.rule">
        <field name="name">Library User - Personal Library Cards</field>
        <field ref="library.model_library_card" name="model_id" />
        <field eval="1" name="global" />
        <field name="domain_force">[('user_id','=',user.id)]</field>
        <field name="groups" eval="[(4, ref('library.group_userian'))]" />
    </record>

    <!-- Record Rule For Library Users - Personal Stock Pickings -->
    <record id="library_user_picking_record" model="ir.rule">
        <field name="name">Library User - Personal Stock Pickings</field>
        <field ref="stock.model_stock_picking" name="model_id" />
        <field eval="1" name="global" />
        <field name="domain_force">[('user_id','=',user.id)]</field>
        <field name="groups" eval="[(4, ref('library.group_userian'))]" />
    </record>

    <!-- Record Rule For Library Users - Personal Stock Moves -->
    <record id="library_user_move_record" model="ir.rule">
        <field name="name">Library User - Personal Stock Moves</field>
        <field ref="stock.model_stock_move" name="model_id" />
        <field eval="1" name="global" />
        <field name="domain_force">[('picking_id.user_id','=',user.id)]</field>
        <field name="groups" eval="[(4, ref('library.group_userian'))]" />
    </record>

    <!-- Record Rule For Library Users - Personal Stock Move Lines -->
    <record id="library_user_move_line_record" model="ir.rule">
        <field name="name">Library User - Personal Stock Move Lines</field>
        <field ref="stock.model_stock_move_line" name="model_id" />
        <field eval="1" name="global" />
        <field name="domain_force">[('picking_id.user_id','=',user.id)]</field>
        <field name="groups" eval="[(4, ref('library.group_userian'))]" />
    </record>
</odoo>
